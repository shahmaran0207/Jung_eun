<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<div class="min-h-screen flex flex-col bg-orange-50">
    <div th:replace="~{header :: header}"></div>
    <main class="flex-1 flex">
        <div th:replace="~{member/myPageAside :: aside}"></div>
        <div class="flex-1 p-4 md:p-6 mx-8 mt-16">
            <!-- Iterate over orders -->
            <th:block th:each="order, iterStat : ${list}">
                <!-- Check if it's the first order or different from the previous one -->
                <th:block th:if="${iterStat.index == 0 or order.cdi != list[iterStat.index - 1].cdi}">
                    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                        <h2 class="text-2xl font-semibold mb-4">카트 번호: <span th:text="${order.cdi}"></span></h2>
                        <!-- 배송 정보 출력 -->
                        <h2 class="text-2xl font-semibold mb-4">배송 정보</h2><br>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="md:col-span-2 mr-12">
                                <ul class="space-y-4">
                                    <li class="flex items-center justify-between gap-4">
                                        <div class="flex items-center gap-4">
                                            <div>
                                                <h3 id="order_id" class="text-lg font-semibold">주문: <span th:text="${order.order_id}"></span></h3>
                                                <h3 id="member_id" class="text-lg font-semibold">고객 번호: <span th:text="${order.member_id}"></span></h3>
                                                <h3 id="customerName" class="text-lg font-semibold">고객 이름: <span th:text="${order.member_name}"></span></h3>
                                                <h3 id="customerPhone" class="text-lg font-semibold">고객 전화번호: <span th:text="${order.member_phone}"></span></h3>
                                                <h3 id="customerEmail" class="text-lg font-semibold">고객 이메일: <span th:text="${order.member_email}"></span></h3>
                                            </div>
                                        </div>
                                    </li>
                                    <hr>
                                </ul>
                            </div>
                        </div>
                        <!-- Iterate over items with the current order's items -->
                        <ul class="space-y-4">
                            <th:block th:each="item : ${list}" th:if="${item.cdi == order.cdi}">
                                <li class="flex items-center justify-between gap-4">
                                    <div class="flex items-center gap-4">
                                        <img src="/placeholder.svg" alt="Product Image" width="100" height="100"
                                             class="w-20 h-20 object-cover rounded-md"
                                             style="aspect-ratio: 100 / 100; object-fit: cover;"/>
                                        <div>
                                            <h3 class="text-lg font-semibold">상품명: <span th:text="${item.member_id}"></span></h3>
                                        </div>
                                    </div>
                                </li>
                            </th:block>
                        </ul>
                    </div>
                </th:block>
            </th:block>
        </div>
    </main>
    <div th:replace="~{footer :: footer}"></div>
</div>
</body>
</html>
