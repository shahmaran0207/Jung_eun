CREATE TABLE membercart (
    id              INT   ,
    order_id INT,
    member_id INT,
    delivery_id INT,
    member_name VARCHAR(255),
    member_email VARCHAR(255),
    member_address VARCHAR(255),
    member_phone VARCHAR(20),
    product_name VARCHAR(255),
    unit_price number,
    total_price int,
    count INT,
    order_date date,
    address VARCHAR(255),
    delivery_status VARCHAR(50)
);

-- 2단계: 뷰의 데이터를 새로운 테이블에 삽입합니다.
INSERT INTO membercart (order_id, member_id, delivery_id, member_name, member_email, member_address, member_phone, product_name, unit_price, total_price,  count, order_date, address, delivery_status)
SELECT 
    o.id AS order_id,
    m.id AS member_id,
    s.id AS delivery_id,
    m.name AS member_name,
    m.email AS member_email,
    m.address AS member_address,
    m.phone AS member_phone,
    oi.product_name AS product_name,
    oi.price as unit_price,
    (oi.price * oi.count) AS total_price,
    (oi.count) AS count,
    (o.order_date) AS order_date,
    m.address AS address,
    s.status AS delivery_status
FROM 
    orders o
JOIN 
    member m ON o.member_id = m.id
JOIN 
    orderitem oi ON o.orderitem_id = oi.order_id
JOIN 
    shipments s ON o.delivery_id = s.id;